<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benetrip - Voos para sua viagem</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Adicione o estilo espec√≠fico para os novos filtros -->
    <style>
        /* Corre√ß√£o da sombra do modal */
        .painel-filtros {
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15); /* Sombra aprimorada */
        }

        .modal-filtros {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.18); /* Sombra mais evidente */
            border-radius: 12px;
        }

        /* Estilos para os filtros expand√≠veis adicionais */
        .filtro-expandivel-content {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.3s ease;
            padding: 0 10px;
        }

        .filtro-subitem {
            margin: 12px 0;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .filtro-subitem:last-child {
            border-bottom: none;
        }

        .filtro-sublabel {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 6px;
            color: #555;
        }

        .double-slider {
            position: relative;
            height: 24px;
            margin: 10px 0;
        }

        .double-slider:before {
            content: '';
            position: absolute;
            width: 100%;
            height: 5px;
            background-color: #d7dcdf;
            border-radius: 5px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

        .entre-voos-valor-container {
            text-align: center;
            margin-top: 5px;
            font-weight: 500;
            color: var(--orange-primary);
        }
    </style>
</head>
<body>
    <div id="voos-container">
        <!-- Header -->
        <div class="voos-header">
            <div class="logo-container">
                <img src="assets/images/benetrip-logo.png" alt="Benetrip Logo" height="40">
            </div>
            <div class="destino-info">
                <h1>Voos para <span id="destino-nome">Medell√≠n</span></h1>
                <p>5 a 9 de Agosto, 2025 ‚Ä¢ 1 adulto</p>
            </div>
            <button class="btn-voltar">‚Üê Voltar</button>
        </div>

        <!-- Bot√£o de Personalizar Busca -->
        <div class="customize-search-button" id="btn-personalizar-busca">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="4" y1="21" x2="4" y2="14"></line>
                <line x1="4" y1="10" x2="4" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12" y2="3"></line>
                <line x1="20" y1="21" x2="20" y2="16"></line>
                <line x1="20" y1="12" x2="20" y2="3"></line>
                <line x1="1" y1="14" x2="7" y2="14"></line>
                <line x1="9" y1="8" x2="15" y2="8"></line>
                <line x1="17" y1="16" x2="23" y2="16"></line>
            </svg>
            Personalizar Busca
            <span id="filtros-badge" class="filtros-badge" style="display:none;">0</span>
        </div>

        <!-- Filtros R√°pidos -->
        <div class="filtros-rapidos">
            <button class="filtro-rapido" data-tipo="diretos">
                <span class="filtro-rapido-icon">‚úàÔ∏è</span>
                Voos Diretos
            </button>
            <button class="filtro-rapido" data-tipo="manha">
                <span class="filtro-rapido-icon">üåÖ</span>
                Sa√≠da pela Manh√£
            </button>
            <button class="filtro-rapido" data-tipo="economicos">
                <span class="filtro-rapido-icon">üí∞</span>
                Mais Econ√¥micos
            </button>
        </div>

        <!-- Conte√∫do -->
        <div class="voos-content">
            <!-- Aqui o conte√∫do ser√° preenchido dinamicamente pelo JavaScript -->
            <div class="loading-container">
                <img src="assets/images/tripinha/loading2.png" alt="Tripinha carregando" class="loading-avatar">
                <div class="loading-text">Farejando os melhores voos para voc√™...</div>
                <div class="progress-bar-container">
                    <div class="progress-bar" role="progressbar" style="width: 10%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="loading-tips">
                    <p>üí° Dica: Voos diretos aparecem destacados em azul!</p>
                </div>
            </div>
        </div>

        <!-- Bot√£o de Sele√ß√£o Fixo -->
        <div class="botao-selecao-fixo">
            <button class="btn-selecionar-voo">
                <span>Escolher Este Voo</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Modal de Personaliza√ß√£o (Filtros) - VERS√ÉO ATUALIZADA COM NOVOS CAMPOS -->
    <div id="modal-filtros" class="modal-backdrop modal-filtros">
        <div class="painel-filtros">
            <div class="filtros-header">
                <h3>Personalizar Busca</h3>
                <button id="btn-fechar-filtros" class="btn-fechar-filtros">√ó</button>
            </div>
            
            <div class="filtros-content">
                <!-- Voos Diretos -->
                <div class="filtro-item">
                    <div class="filtro-label">
                        <span class="filtro-icone">‚úì</span>
                        Voos Diretos
                    </div>
                    <div class="filtro-control">
                        <label class="switch">
                            <input type="checkbox" id="filtro-voos-diretos">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>

                <!-- Pre√ßo M√°ximo - REPOSICIONADO AQUI -->
                <div class="filtro-item">
                    <div class="filtro-label">
                        <span class="filtro-icone">üí∞</span>
                        Pre√ßo M√°ximo
                    </div>
                    <div class="filtro-control">
                        <div class="range-slider-container">
                            <input type="range" min="0" max="100" value="100" id="preco-slider" class="range-slider">
                            <div class="preco-valor-container">
                                <span id="preco-valor">Qualquer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NOVO: Se√ß√£o expand√≠vel para Voo de Ida -->
                <div class="filtro-expandivel">
                    <div class="filtro-header" aria-expanded="false" aria-controls="voo-ida-content">
                        <div class="filtro-label">
                            <span class="filtro-icone">üõ´</span>
                            Voo de Ida
                        </div>
                        <span class="filtro-toggle">‚ñº</span>
                    </div>
                    <div class="filtro-expandivel-content" id="voo-ida-content">
                        <!-- Hor√°rio de Partida (Ida) -->
                        <div class="filtro-subitem">
                            <div class="filtro-sublabel">Hor√°rio de Partida</div>
                            <div class="range-values">
                                <span id="ida-partida-min">00:00</span>
                                <span id="ida-partida-max">23:59</span>
                            </div>
                            <div class="double-slider">
                                <input type="range" min="0" max="1439" value="0" id="ida-partida-slider-min">
                                <input type="range" min="0" max="1439" value="1439" id="ida-partida-slider-max">
                            </div>
                        </div>
                        
                        <!-- Hor√°rio de Chegada (Ida) -->
                        <div class="filtro-subitem">
                            <div class="filtro-sublabel">Hor√°rio de Chegada</div>
                            <div class="range-values">
                                <span id="ida-chegada-min">00:00</span>
                                <span id="ida-chegada-max">23:59</span>
                            </div>
                            <div class="double-slider">
                                <input type="range" min="0" max="1439" value="0" id="ida-chegada-slider-min">
                                <input type="range" min="0" max="1439" value="1439" id="ida-chegada-slider-max">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NOVO: Se√ß√£o expand√≠vel para Voo de Volta -->
                <div class="filtro-expandivel">
                    <div class="filtro-header" aria-expanded="false" aria-controls="voo-volta-content">
                        <div class="filtro-label">
                            <span class="filtro-icone">üõ¨</span>
                            Voo de Volta
                        </div>
                        <span class="filtro-toggle">‚ñº</span>
                    </div>
                    <div class="filtro-expandivel-content" id="voo-volta-content">
                        <!-- Hor√°rio de Partida (Volta) -->
                        <div class="filtro-subitem">
                            <div class="filtro-sublabel">Hor√°rio de Partida</div>
                            <div class="range-values">
                                <span id="volta-partida-min">00:00</span>
                                <span id="volta-partida-max">23:59</span>
                            </div>
                            <div class="double-slider">
                                <input type="range" min="0" max="1439" value="0" id="volta-partida-slider-min">
                                <input type="range" min="0" max="1439" value="1439" id="volta-partida-slider-max">
                            </div>
                        </div>
                        
                        <!-- Hor√°rio de Chegada (Volta) -->
                        <div class="filtro-subitem">
                            <div class="filtro-sublabel">Hor√°rio de Chegada</div>
                            <div class="range-values">
                                <span id="volta-chegada-min">00:00</span>
                                <span id="volta-chegada-max">23:59</span>
                            </div>
                            <div class="double-slider">
                                <input type="range" min="0" max="1439" value="0" id="volta-chegada-slider-min">
                                <input type="range" min="0" max="1439" value="1439" id="volta-chegada-slider-max">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NOVO: Tempo entre Voos -->
                <div class="filtro-item">
                    <div class="filtro-label">
                        <span class="filtro-icone">‚è±Ô∏è</span>
                        Tempo entre Voos
                    </div>
                    <div class="filtro-control">
                        <div class="range-slider-container">
                            <input type="range" min="0" max="168" value="168" id="entre-voos-slider" class="range-slider">
                            <div class="entre-voos-valor-container">
                                <span id="entre-voos-valor">Qualquer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dura√ß√£o M√°xima -->
                <div class="filtro-item">
                    <div class="filtro-label">
                        <span class="filtro-icone">‚è≥</span>
                        Dura√ß√£o M√°xima
                    </div>
                    <div class="filtro-control">
                        <div class="range-slider-container">
                            <input type="range" min="1" max="24" value="24" id="duracao-slider" class="range-slider">
                            <div class="duracao-valor-container">
                                <span id="duracao-valor">Qualquer</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Companhias A√©reas - Expand√≠vel -->
                <div class="filtro-expandivel">
                    <div class="filtro-header" aria-expanded="false" aria-controls="companhias-content">
                        <div class="filtro-label">
                            <span class="filtro-icone">‚úàÔ∏è</span>
                            Companhias A√©reas
                        </div>
                        <span class="filtro-toggle">‚ñº</span>
                    </div>
                    <div class="filtro-expandivel-content" id="companhias-content">
                        <!-- Preenchido dinamicamente pelo JavaScript -->
                        <div class="loading-placeholder">
                            <span class="loading-spinner"></span>
                            Carregando companhias...
                        </div>
                    </div>
                </div>

                <!-- Aeroportos - Expand√≠vel -->
                <div class="filtro-expandivel">
                    <div class="filtro-header" aria-expanded="false" aria-controls="aeroportos-content">
                        <div class="filtro-label">
                            <span class="filtro-icone">üè¢</span>
                            Aeroportos
                        </div>
                        <span class="filtro-toggle">‚ñº</span>
                    </div>
                    <div class="filtro-expandivel-content" id="aeroportos-content">
                        <!-- Preenchido dinamicamente pelo JavaScript -->
                        <div class="loading-placeholder">
                            <span class="loading-spinner"></span>
                            Carregando aeroportos...
                        </div>
                    </div>
                </div>

                <!-- Bot√£o para procurar novamente -->
                <div class="filtro-item">
                    <button id="btn-refazer-busca" class="btn-busca-avancada">
                        Refazer busca com novas datas
                    </button>
                </div>
            </div>

            <!-- Resumo de filtros e resultados -->
            <div class="resumo-filtros">
                <div class="filtros-ativos">
                    Filtros ativos: <span id="filtros-count">0</span>
                </div>
                <div class="resultados-preview">
                    <span id="total-resultados-filtrados">0</span> de <span id="total-resultados">0</span>
                </div>
            </div>

            <!-- Bot√µes de a√ß√£o -->
            <div class="filtros-footer">
                <button id="btn-limpar-filtros" class="btn-limpar-filtros">Limpar</button>
                <button id="btn-aplicar-filtros" class="btn-aplicar-filtros">Aplicar Filtros</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes de Voo -->
    <div id="modal-detalhes-voo" class="modal-backdrop" style="display:none;">
        <div class="modal-content detalhes-voo-modal">
            <div class="modal-header">
                <h3>Detalhes do Voo</h3>
                <button id="btn-fechar-detalhes" class="btn-fechar">√ó</button>
            </div>
            <div class="modal-body" id="detalhes-voo-content">
                <!-- Conte√∫do do modal de detalhes preenchido dinamicamente por JavaScript -->
            </div>
            <div class="modal-footer">
                <button id="btn-voltar-lista" class="btn-secundario">Voltar</button>
                <button id="btn-selecionar-este-voo" class="btn-principal">Escolher Este Voo</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o -->
    <div id="modal-confirmacao" class="modal-backdrop" style="display:none;">
        <div class="modal-content confirmacao-modal">
            <div class="modal-header">
                <h3>Confirmar Sele√ß√£o</h3>
                <button id="btn-fechar-confirmacao" class="btn-fechar">√ó</button>
            </div>
            <div class="modal-body" id="confirmacao-content">
                <!-- Conte√∫do do modal de confirma√ß√£o preenchido dinamicamente por JavaScript -->
            </div>
            <div class="modal-footer">
                <button id="btn-cancelar-selecao" class="btn-secundario">Voltar</button>
                <button id="btn-confirmar-selecao" class="btn-principal">Confirmar e Continuar</button>
            </div>
        </div>
    </div>

    <!-- Template para estado "Sem Resultados" -->
    <template id="template-sem-resultados">
        <div class="filtro-sem-resultados">
            <img src="assets/images/tripinha/triste.png" alt="Tripinha triste" width="80" height="80">
            <h3>Nenhum voo encontrado</h3>
            <p>Infelizmente, n√£o encontramos voos que correspondam aos seus filtros atuais.</p>
            <button class="btn-limpar-filtros-todos">Limpar Todos os Filtros</button>
        </div>
    </template>
  
    <!-- Container de Toasts -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="assets/js/hammer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="assets/js/flights.js"></script>
    <script src="assets/js/voos-interface.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar o bot√£o de personalizar busca
            document.getElementById('btn-personalizar-busca').addEventListener('click', function() {
                if (typeof abrirModalFiltros === 'function') {
                    abrirModalFiltros();
                } else {
                    const modal = document.getElementById('modal-filtros');
                    if (modal) {
                        modal.style.display = 'flex';
                        setTimeout(() => {
                            modal.classList.add('modal-active');
                        }, 10);
                    }
                }
            });
            
            // Fun√ß√£o global para fechar modais
            window.fecharModal = function(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('modal-active');
                    setTimeout(() => {
                        modal.style.display = 'none';
                    }, 300);
                }
            };
            
            // Fun√ß√£o global para mostrar confirma√ß√£o
            window.mostrarConfirmacaoSelecao = function() {
                const modal = document.getElementById('modal-confirmacao');
                if (modal) {
                    // Preencher dados do modal com base no voo selecionado
                    const vooSelecionado = window.BENETRIP_VOOS?.vooSelecionado;
                    if (vooSelecionado) {
                        const contentDiv = document.getElementById('confirmacao-content');
                        if (contentDiv) {
                            // Preencher conte√∫do
                            // ...
                        }
                    }
                    
                    // Exibir modal
                    modal.style.display = 'flex';
                    setTimeout(() => {
                        modal.classList.add('modal-active');
                    }, 10);
                }
            };
        });
    </script>
</body>
</html>
